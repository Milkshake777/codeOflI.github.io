<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon128.ico?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon32.ico?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon16.ico?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">
  <link rel="alternate" href="/atom.xml" title="nicolas" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="[TOC]入门mybatis约定：输入参数parameterType 和 输出参数resultType ，在形式上都只能有一个如果输入参数 ：是简单类型（8个基本类型+String） 是可以使用任何占位符,#{xxxx}           如果是对象类型，则必须是对象的属性 #{属性名}输出参数：  如果返回值类型是一个 对象（如Student），则无论返回一个、还是多个，        再re">
<meta name="keywords" content="java,mybatis">
<meta property="og:type" content="article">
<meta property="og:title" content="mybatis">
<meta property="og:url" content="https://codeofli.github.io/2019/10/java-note/mybatis/mybatis/index.html">
<meta property="og:site_name" content="nicolas">
<meta property="og:description" content="[TOC]入门mybatis约定：输入参数parameterType 和 输出参数resultType ，在形式上都只能有一个如果输入参数 ：是简单类型（8个基本类型+String） 是可以使用任何占位符,#{xxxx}           如果是对象类型，则必须是对象的属性 #{属性名}输出参数：  如果返回值类型是一个 对象（如Student），则无论返回一个、还是多个，        再re">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://codeofli.github.io/2019/10/java-note/mybatis/mybatis/E:%5Cpictures%5CLanguage%5Cmybatis%5C%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%981.png">
<meta property="og:updated_time" content="2021-10-23T02:19:04.200Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mybatis">
<meta name="twitter:description" content="[TOC]入门mybatis约定：输入参数parameterType 和 输出参数resultType ，在形式上都只能有一个如果输入参数 ：是简单类型（8个基本类型+String） 是可以使用任何占位符,#{xxxx}           如果是对象类型，则必须是对象的属性 #{属性名}输出参数：  如果返回值类型是一个 对象（如Student），则无论返回一个、还是多个，        再re">
<meta name="twitter:image" content="https://codeofli.github.io/2019/10/java-note/mybatis/mybatis/E:%5Cpictures%5CLanguage%5Cmybatis%5C%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%981.png">
  <link rel="canonical" href="https://codeofli.github.io/2019/10/java-note/mybatis/mybatis/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>mybatis | nicolas</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">nicolas</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Yesterday you said tomorow.</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    
      
      
        
      
        
      
        
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    
      
      
        
      
        
      
        
          
        
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">29</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    
      
      
        
      
        
          
        
      
        
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">10</span></a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    
      
      
        
          
        
      
        
      
        
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">40</span></a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/codeOflI/LearningNotes" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://codeofli.github.io/2019/10/java-note/mybatis/mybatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="nicolas lee">
      <meta itemprop="description" content="Yesterday you said tomorow.">
      <meta itemprop="image" content="/assets/img/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="nicolas">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">mybatis

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-12 10:40:06" itemprop="dateCreated datePublished" datetime="2019-10-12T10:40:06+08:00">2019-10-12</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-23 10:19:04" itemprop="dateModified" datetime="2021-10-23T10:19:04+08:00">2021-10-23</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
          
          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span></span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>[TOC]</p><h1 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h1><h2 id="mybatis约定："><a href="#mybatis约定：" class="headerlink" title="mybatis约定："></a>mybatis约定：</h2><p>输入参数parameterType 和 输出参数resultType ，在形式上都只能有一个</p><p>如果输入参数 ：是简单类型（8个基本类型+String） 是可以使用任何占位符,#{xxxx}<br>           如果是对象类型，则必须是对象的属性 #{属性名}</p><p>输出参数：  如果返回值类型是一个 对象（如Student），则无论返回一个、还是多个，<br>        再resultType都写成org.lanqiao.entity.Student<br>        即 resultType=”org.lanqiao.entity.Student”</p><a id="more"></a>



<h2 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h2><p>如果使用的 事务方式为 jdbc,则需要 手工commit提交，即session.commit();</p>
<h2 id><a href="#" class="headerlink" title></a></h2><h2 id="conf-xml"><a href="#conf-xml" class="headerlink" title="conf.xml"></a>conf.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 通过environment的default值和environment的id值指定Mybatis数据库的运行环境 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- development environment --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 事务提交方式：</span></span><br><span class="line"><span class="comment">			JDBC：使用JDBC方式提交事务（commit rollback close）</span></span><br><span class="line"><span class="comment">			MANAGED:将事务交给其他组件去托管（spring，jobss）默认自动关闭</span></span><br><span class="line"><span class="comment">			设置不关闭：</span></span><br><span class="line"><span class="comment">			&lt;transactionManager type="MANAGED" /&gt;</span></span><br><span class="line"><span class="comment">				property name="closeConnection" value="false" /&gt;</span></span><br><span class="line"><span class="comment">		 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 数据源类型</span></span><br><span class="line"><span class="comment">				UNPOOLED:传统jdbc方式(每次访问数据，均需要打开和关闭等数据库操作，但是打开和关闭都是很浪费资源和性能的）</span></span><br><span class="line"><span class="comment">				POLLED：使用数据库连接池</span></span><br><span class="line"><span class="comment">				JNDI：从tomcat中获取一个内置数据库连接池（数据库连接池-数据源）</span></span><br><span class="line"><span class="comment">			 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- 配置数据库信息 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"oracle.jdbc.OracleDriver"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:oracle:thin:@localhost:1521:MLDN"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"scott"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"tigger"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--  test environment--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">				<span class="comment">&lt;!-- 配置数据库信息 --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"oracle.jdbc.OracleDriver"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:oracle:thin:@111:11:11:1521:MLDN"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"scott"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"tigger"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 加载映射文件 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"pers/nicolas/entity/studentMapper.xml"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="mapper-xml"><a href="#mapper-xml" class="headerlink" title="mapper.xml"></a>mapper.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span> </span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper  </span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  </span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- namespace：该mapper.xml映射文件的唯一标识 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"pers.nicolas.entity.studnetMapper"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 后续通过namespace.Id 定位该SQL语句--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- parameterType：输入参数的类型</span></span><br><span class="line"><span class="comment">		resultType：查询结果的返回类型</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentBysno"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"pers.nicolas.entity.Student"</span>&gt;</span></span><br><span class="line">		select * from student where stuno = #&#123;stuno&#125;<span class="comment">&lt;!-- 不能有分号！！！无效字符 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addStudent"</span> <span class="attr">parameterType</span>=<span class="string">"pers.nicolas.entity.Student"</span> &gt;</span></span><br><span class="line">		insert into student(stuno,stuname,stuage,graname) values(#&#123;stuNo&#125;,#&#123;stuName&#125;,#&#123;stuAge&#125;,#&#123;graName&#125;)</span><br><span class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteStudentBySno"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">		delete from student where stuno=#&#123;stuno&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateStudentBySno"</span> <span class="attr">parameterType</span>=<span class="string">"pers.nicolas.entity.Student"</span>&gt;</span></span><br><span class="line">		update student set stuno=#&#123;stuNo&#125;, stuname = #&#123;stuName&#125;, stuage=#&#123;stuAge&#125;,graname=#&#123;graName&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryAllStudents"</span> <span class="attr">resultType</span>=<span class="string">"pers.nicolas.entity.Student"</span>&gt;</span></span><br><span class="line">		select * from student</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="mybatis约定：-1"><a href="#mybatis约定：-1" class="headerlink" title="mybatis约定："></a>mybatis约定：</h2><p>输入参数parameterType 和 输出参数resultType ，在形式上都只能有一个</p>
<p>如果输入参数 ：是简单类型（8个基本类型+String） 是可以使用任何占位符,#{xxxx}<br>           如果是对象类型，则必须是对象的属性 #{属性名}</p>
<p>输出参数：  如果返回值类型是一个 对象（如Student），则无论返回一个、还是多个，<br>        再resultType都写成org.lanqiao.entity.Student<br>        即 resultType=”org.lanqiao.entity.Student”</p>
<p>注意事项：<br>如果使用的 事务方式为 jdbc,则需要 手工commit提交，即session.commit();</p>
<h2 id="mapper动态代理方式的crud"><a href="#mapper动态代理方式的crud" class="headerlink" title="mapper动态代理方式的crud"></a>mapper动态代理方式的crud</h2><p>又称<strong>（MyBatis接口开发）</strong></p>
<p>原则：约定优于配置 </p>
<p>硬编码方式<br>    abc.java<br>        Configuration conf = new Configuration();<br>        con.setName(“myProject”) ;</p>
<p>配置方式：<br>    abc.xml<br>        <name>myProject</name></p>
<p>约定：默认值就是myProject</p>
<h2 id="具体实现的步骤："><a href="#具体实现的步骤：" class="headerlink" title="具体实现的步骤："></a>具体实现的步骤：</h2><p>1.基础环境：mybatis.jar/ojdbc.jar、conf.xml、mapper.xml<br>2.（不同之处）<br>    约定的目标： 省略掉statement,即根据约定 直接可以定位出SQL语句</p>
<p>  a.接口，接口中的方法必须遵循以下约定：</p>
<p> 1.方法名和mapper.xml文件中标签的id值相同</p>
<p>2 .方法的 输入参数 和mapper.xml文件中标签的 parameterType类型一致 (如果mapper.xml的标签中没有 parameterType，则说明方法没有输入参数)</p>
<p>3.方法的返回值  和mapper.xml文件中标签的 resultType类型一致 （无论查询结果是一个 还是多个（student、List<student>），在mapper.xml标签中的resultType中只写 一个（Student）；如果没有resultType，则说明方法的返回值为void）</student></p>
<p>除了以上约定，要实现 接口中的方法  和  Mapper.xml中SQL标签一一对应，还需要以下1点：<br>    <strong>namespace的值 ，就是  接口的全类名（ 接口 - mapper.xml 一一对应）</strong></p>
<p>匹配的过程：（约定的过程）<br>1.根据 接口名 找到 mapper.xml文件（根据的是namespace=接口全类名）<br>2.根据 接口的方法名 找到 mapper.xml文件中的SQL标签 （方法名=SQL标签Id值）</p>
<p>以上2点可以保证： 当我们调用接口中的方法时，<br>程序能自动定位到 某一个Mapper.xml文件中的sqL标签</p>
<p>习惯：SQL映射文件（mapper.xml） 和 接口放在同一个包中 （注意修改conf.xml中加载mapper.xml文件的路径）</p>
<p>以上，可以通过接口的方法-&gt;SQL语句</p>
<p>执行：<br>        StudentMapper studentMapper = session.getMapper(StudentMapper.class) ;<br>        studentMapper.方法();</p>
<p>通过session对象获取接口（session.getMapper(接口.class);），再调用该接口中的方法，程序会自动执行该方法对应的SQL。</p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeAliases" target="_blank" rel="noopener">https://mybatis.org/mybatis-3/zh/configuration.html#typeAliases</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">"Problem"</span> <span class="attr">type</span>=<span class="string">"com.yoj.web.bean.Problem"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.yoj.web.bean"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>也可以指定一个包名，MyBatis 会在包名下面搜索需要的 Java Bean，比如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"domain.blog"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>每一个在包 <code>domain.blog</code> 中的 Java Bean，在没有注解的情况下，会使用 Bean 的首字母小写的非限定类名来作为它的别名。 比如 <code>domain.blog.Author</code> 的别名为 <code>author</code>；若有注解，则别名为其注解值。见下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias</span>(<span class="string">"author"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Author</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="类型处理器（类型转换器）"><a href="#类型处理器（类型转换器）" class="headerlink" title="类型处理器（类型转换器）"></a>类型处理器（类型转换器）</h1><p>1.MyBatis自带一些常见的类型处理器<br>    int  - number</p>
<p>2.自定义MyBatis类型处理器</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -数据库<span class="comment">(jdbc类型)</span></span><br></pre></td></tr></table></figure>

<p>示例：<br>实体类Student :  boolean   stuSex<br>            true:男<br>            false：女</p>
<p>表student：    number  stuSex<br>            1:男<br>            0：女<br>自定义类型转换器（boolean -number）步骤：<br>a.创建转换器：需要实现TypeHandler接口<br>    通过阅读源码发现，此接口有一个实现类 BaseTypeHandler ，因此 要实现转换器有2种选择：<br>    i.实现接口TypeHandler接口<br>    ii.继承BaseTypeHandler<br>b.配置conf.xml</p>
<p>需要注意的问题：  INTEGER(需要大写)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into student(stuno,stuname,stuage,graname,stusex) values(#&#123;stuNo&#125;,#&#123;stuName&#125;,#&#123;stuAge&#125;,#&#123;graName&#125; ,#&#123;stuSex ,javaType=boolean  ,jdbcType=INTEGER   &#125; )</span><br></pre></td></tr></table></figure>

<p>注意#{stuNo} 中存放的是 属性值，需要严格区分大小写。</p>
<p>resultMap可以实现2个功能：<br>1.类型转换<br>2.属性-字段的映射关系</p>
<select id="queryStudentByStuno" parametertype="int" resultmap="studentMapping">
        select * from student where stuno = #{stuno}
    </select>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"student"</span> <span class="attr">id</span>=<span class="string">"studentMapping"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 分为主键id 和非主键 result--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span>  <span class="attr">column</span>=<span class="string">"stuno"</span>  /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuName"</span>  <span class="attr">column</span>=<span class="string">"stuname"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuAge"</span>  <span class="attr">column</span>=<span class="string">"stuage"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"graName"</span>  <span class="attr">column</span>=<span class="string">"graname"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuSex"</span>  <span class="attr">column</span>=<span class="string">"stusex"</span>  <span class="attr">javaType</span>=<span class="string">"boolean"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="mybatis调用存储过程"><a href="#mybatis调用存储过程" class="headerlink" title="mybatis调用存储过程"></a>mybatis调用存储过程</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryCountByGradeWithProcedure"</span> <span class="attr">statementType</span>=<span class="string">"CALLABLE"</span>  <span class="attr">parameterType</span>=<span class="string">"HashMap"</span> &gt;</span></span><br><span class="line">	&#123;</span><br><span class="line">		CALL queryCountByGradeWithProcedure(</span><br><span class="line">			#&#123;gName,jdbcType=VARCHAR,mode=IN&#125;,</span><br><span class="line">			#&#123;scount,jdbcType=INTEGER,mode=OUT&#125;</span><br><span class="line">		) </span><br><span class="line">	&#125;	</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中 通过statementType=”CALLABLE”设置SQL的执行方式是存储过程。 存储过程的输入参数gName需要通过HashMap来指定<br>在使用时，通过hashmap的put方法传入输入参数的值；通过hashmap的Get方法 获取输出参数的值。<br>要注意Jar问题：ojdbc6.jar不能在 调存储过程时  打回车、tab，但是ojdbc7.jar可以。</p>
<p>如果报错： No enum constant org.apache.ibatis.type.JdbcType.xx，则说明mybatis不支持xx类型，需要查表。</p>
<p>存储过程 无论输入参数是什么值，语法上都需要 用map来传递该值；</p>
<p>只要 是  <transactionmanager type="JDBC">，则增删改都需要手工commit ;</transactionmanager></p>
<p>mapper.xml-&gt;mapper接口-&gt;测试方法</p>
<h1 id="输入和输出参数"><a href="#输入和输出参数" class="headerlink" title="输入和输出参数"></a>输入和输出参数</h1><h2 id="输入参数parameterType"><a href="#输入参数parameterType" class="headerlink" title="输入参数parameterType"></a>输入参数parameterType</h2><h2 id="1-类型为-简单类型（8个基本类型-String）"><a href="#1-类型为-简单类型（8个基本类型-String）" class="headerlink" title="1.类型为 简单类型（8个基本类型+String）"></a>1.类型为 简单类型（8个基本类型+String）</h2><h3 id="、-的区别"><a href="#、-的区别" class="headerlink" title="#{}、${}的区别"></a><strong>#{}、${}的区别</strong></h3><p>a.<br><strong>#{任意值}</strong><br><strong>${value} ，其中的标识符只能是value</strong></p>
<p><strong>b.#{}自动给String类型加上’’  （自动类型转换）</strong></p>
<p>  ${} 原样输出，但是适合于 动态排序（动态字段）</p>
<p>select stuno,stuname,stuage  from student where stuname = #{value}</p>
<p>select stuno,stuname,stuage  from student where stuname = ‘${value}’</p>
<p>动态排序：<br>select stuno,stuname,stuage  from student  order by ${value} asc</p>
<p><strong>c.#{}可以防止SQL注入</strong><br>  ${}不防止</p>
<p>${}、#{}相同之处：<br>a.都可以 获取对象的值 （嵌套类型对象）</p>
<p>i.获取对象值：<br>模糊查询，方式一：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stuno,stuname,stuage  <span class="keyword">from</span> student <span class="keyword">where</span> stuage= <span class="comment">#&#123;stuAge&#125;  or stuname like #&#123;stuName&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student student = <span class="keyword">new</span> Student();</span><br><span class="line">	student.setStuAge(<span class="number">24</span>);</span><br><span class="line">	student.setStuName(<span class="string">"%w%"</span>);</span><br><span class="line">	List&lt;Student&gt; students = studentMapper.queryStudentBystuageOrstuName(student) ;<span class="comment">//接口的方法-&gt;SQL</span></span><br></pre></td></tr></table></figure>

<p>模糊查询，方式二：<br>    student.setStuName(“w”);<br>    select stuno,stuname,stuage  from student where stuage= #{stuAge}  or stuname like ‘%${stuName}%’</p>
<p>ii.嵌套类型对象</p>
<h2 id="2-对象类型"><a href="#2-对象类型" class="headerlink" title="2.对象类型"></a>2.对象类型</h2><p>#{属性名}<br>${属性名}</p>
<p>输入对象为HashMap：<br>where stuage= #{stuAge}</p>
<p>用map中key的值 匹配 占位符#{stuAge}，如果匹配成功 就用map的value替换占位符</p>
<h2 id="输出参数resultType"><a href="#输出参数resultType" class="headerlink" title="输出参数resultType"></a>输出参数resultType</h2><p>输出参数resultType<br>1.简单类型（8个基本+String）<br>2.输出参数为实体对象类型<br>3.输出参数为实体对象类型的集合 ：虽然输出类型为集合，但是resultType依然写 集合的元素类型（resyltType=”Student”）<br>4.输出参数类型为HashMap<br>    –HashMap本身是一个集合，可以存放多个元素，<br>      但是根据提示发现  返回值为HashMap时  ，查询的结果只能是1个学生（no,name）；<br>–&gt;结论：一个HashMap 对应一个学生的多个元素（多个属性）  【一个map，一个学生】</p>
<p>二维数组<br>{<br>    {1,zs,23,xa},    -一个HashMap对象<br>    {2,ls,24,bj},<br>    {3,ww,25,tj}<br>}</p>
<p>resultType<br>resultMap:实体类的属性、数据表的字段： 类型、名字不同时（stuno,id）<br>注意：当属性名 和字段名 不一致时，除了使用resultMap以外，还可以使用resultType+HashMap:</p>
<p>a.resultMap<br>    <resultmap type="student" id="queryStudentByIdMap"><br>            <!-- 指定类中的属性 和 表中的字段 对应关系 --><br>            <id property="stuNo" column="id"><br>            <result property="stuName" column="name"><br>    </result></id></resultmap></p>
<p>b.resultType+HashMap<br>select  表的字段名 “类的属性名” from… 来制定字段名 和属性名的对应关系<br>    <select id="queryStudentByIdWithHashMap" parametertype="int" resulttype="student"><br>        select id “stuNo”,name “stuName” from student where id = #{id}<br>    </select></p>
<p>注意:  如果如果10个字段，但发现 某一个字段结果始终为默认值（0，0.0，null），则可能是 表的字段  和 类的属性名字写错。</p>
<p>//查询全部<br>String statement = “select stuno,stuname from student”;</p>
<p>//根据年龄查询学生</p>
<p>String statement = “select stuno,stuname from student where stuage = #{stuage}”; </p>
<p>//根据姓名和年龄查询学生</p>
<p>String statement = “select stuno,stuname from student where stuage = #{stuage} and stuage = #{stuage} “; </p>
<p>select stuno,stuname from student where  stuname = #{stuName}and  stuage = #{stuAge}</p>
<p>查询使用了类型转换器 1.如果类中属性和表中字段类型能够合理识别（String-varchar2），则可以使用resultType，(boolean-number)否则使用resultMap；<br>        2.如果类中属性名和表中字段名能够合理识别（stuNo-stuno），则可以使用resultType，（stuno-id）否则使用resultMap；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 别名作为HashMap的Key --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentOutByHashMap"</span> <span class="attr">resultMap</span>=<span class="string">"HashMap"</span>&gt;</span></span><br><span class="line">		select stuno "no", stuname "name" from student </span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--resultMap  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultMap</span>=<span class="string">"queryStudentByIdMap"</span>&gt;</span></span><br><span class="line">		select id,name from student where id = #&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"Student"</span> <span class="attr">id</span>=<span class="string">"queryStudentByIdMap"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 将类中属性和表中字段对应起来 --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 分为主键id和非主键 result --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"stuNo"</span> <span class="attr">column</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuName"</span> <span class="attr">column</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--resultType  HashMap方式起别名--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentByIdWithHashMap"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultType</span>=<span class="string">"Student"</span>&gt;</span></span><br><span class="line">		select id "stuNo",name "stuName" from student where id = #&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h1><p><strong><a href="https://mybatis.org/mybatis-3/zh/dynamic-sql.html" target="_blank" rel="noopener">官网地址</a></strong></p>
<h2 id="where"><a href="#where" class="headerlink" title="where"></a>where</h2><p><em>where</em> 元素只会在至少有一个子元素的条件返回 SQL 子句的情况下才去插入“WHERE”子句。而且，若语句的开头为“AND”或“OR”，<em>where</em> 元素也会将它们去除。</p>
<p>如果 <em>where</em> 元素没有按正常套路出牌，我们可以通过自定义 trim 元素来定制 <em>where</em> 元素的功能。比如，和 <em>where</em> 元素等价的自定义 trim 元素为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"WHERE"</span> <span class="attr">prefixOverrides</span>=<span class="string">"AND |OR "</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- where标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentBySqlTag"</span> <span class="attr">parameterType</span>=<span class="string">"student"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">    select stuno,stuname,stuage,graname from student</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"stuName != null and stuName !='' "</span>&gt;</span></span><br><span class="line">            and stuName = #&#123;stuName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"stuAge != null and stuAge !=0 "</span>&gt;</span></span><br><span class="line">            and stuAge = #&#123;stuAge&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>简单类型的数组:<br>无论编写代码时，传递的是什么参数名(stuNos)，在mapper.xml中 必须用array代替该数组</p>
<p>集合：<br>无论编写代码时，传递的是什么参数名(stuNos)，在mapper.xml中 必须用list代替该数组</p>
<p>对象数组：<br>Student[] students = {student0,student1,student2}  每个studentx包含一个学号属性<br>注意的几点：<br>    parameterType=”Object[]”<br>         <foreach collection="array" open=" and  stuno in (" close=")" item="student" separator=","><br>                       #{student.stuNo}<br>          </foreach></p>
<p>SQL片段：<br>    java：方法<br>    数据库：存储过程、存储函数<br>    Mybatis :SQL片段 </p>
<p>a.提取相似代码<br>b.引用</p>
<h3 id="if标签"><a href="#if标签" class="headerlink" title="if标签"></a>if标签</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加虚拟前缀 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentBySqlTag"</span> <span class="attr">parameterType</span>=<span class="string">"student"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage,graname from student where 1=1</span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"stuName != null and stuName !='' "</span>&gt;</span></span><br><span class="line">			and stuName = #&#123;stuName&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"stuAge != null and stuAge !=0 "</span>&gt;</span></span><br><span class="line">			and stuAge = #&#123;stuAge&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="foreach-Tag"><a href="#foreach-Tag" class="headerlink" title="foreach Tag"></a>foreach Tag</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- foreach迭代 使用对象属性--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentInGrade"</span> <span class="attr">parameterType</span>=<span class="string">"grade"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage,graname from student</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"stuNos != null and stuNos.size &gt; 0"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"stuNos"</span> <span class="attr">open</span>=<span class="string">"and stuno in("</span> <span class="attr">close</span>=<span class="string">")"</span></span></span><br><span class="line"><span class="tag">					<span class="attr">item</span>=<span class="string">"stuNo"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">					#&#123;stuNo&#125;</span><br><span class="line">				<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- foreach迭代 使用list集合--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentWithList"</span> <span class="attr">parameterType</span>=<span class="string">"list"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage,graname from student</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"list != null and list.size &gt; 0"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">open</span>=<span class="string">"and stuno in("</span> <span class="attr">close</span>=<span class="string">")"</span></span></span><br><span class="line"><span class="tag">					<span class="attr">item</span>=<span class="string">"stuNo"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">					#&#123;stuNo&#125;</span><br><span class="line">				<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- foreach迭代 使用简单数组--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentWithArray"</span> <span class="attr">parameterType</span>=<span class="string">"int[]"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage,graname from student</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"array != null and array.length &gt; 0"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">open</span>=<span class="string">"and stuno in("</span> <span class="attr">close</span>=<span class="string">")"</span></span></span><br><span class="line"><span class="tag">					<span class="attr">item</span>=<span class="string">"stuNo"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">					#&#123;stuNo&#125;</span><br><span class="line">				<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- foreach迭代 使用对象数组--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentWithObjectArray"</span> <span class="attr">parameterType</span>=<span class="string">"Object[]"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage,graname from student</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"array != null and array.length &gt; 0"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">open</span>=<span class="string">"and stuno in("</span> <span class="attr">close</span>=<span class="string">")"</span></span></span><br><span class="line"><span class="tag">					<span class="attr">item</span>=<span class="string">"stuNo"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">					#&#123;stuNo&#125;</span><br><span class="line">				<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">queryStudentWithObjectArray</span><span class="params">(Student[] stuNos)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="sql片段"><a href="#sql片段" class="headerlink" title="sql片段"></a>sql片段</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"ObjectArraySql"</span>&gt;</span></span><br><span class="line">		select stuno,stuname,stuage,graname from student</span><br><span class="line">		<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"array != null and array.length &gt; 0"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">open</span>=<span class="string">"and stuno in("</span> <span class="attr">close</span>=<span class="string">")"</span></span></span><br><span class="line"><span class="tag">					<span class="attr">item</span>=<span class="string">"student"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">					#&#123;student.stuNo&#125;</span><br><span class="line">				<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentWithObjectArray"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">parameterType</span>=<span class="string">"Object[]"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 同一文件映射文件下可以省略当前namespace：namesapceId --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"pers.nicolas.mapper.StudentMapper.ObjectArraySql"</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h1><h2 id="关联查询："><a href="#关联查询：" class="headerlink" title="关联查询："></a>关联查询：</h2><h2 id="一对一"><a href="#一对一" class="headerlink" title="一对一:"></a>一对一:</h2><p>a.业务扩展类<br>        核心：用resultType指定类(<strong>该类扩展了连接查询的所有属性</strong>)的属性 包含 多表查询的所有字段</p>
<p>b.resultMap<br>    i.通过 属性成员 将2个类建立起联系 <strong>-&gt;</strong>一对一：association<br>    2.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"student"</span> <span class="attr">id</span>=<span class="string">"student_card_map"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 学生的信息 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span>  <span class="attr">property</span>=<span class="string">"stuNo"</span> <span class="attr">column</span>=<span class="string">"stuNo"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuName"</span> <span class="attr">column</span>=<span class="string">"stuName"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuAge"</span> <span class="attr">column</span>=<span class="string">"stuAge"</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 一对一时，对象成员使用 association映射;javaType指定该属性的类型--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"card"</span> <span class="attr">javaType</span>=<span class="string">"StudentCard"</span> &gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"cardId"</span> <span class="attr">column</span>=<span class="string">"cardId"</span>/&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"cardInfo"</span> <span class="attr">column</span>=<span class="string">"cardInfo"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一对一：association<br>一对多：collection</p>
<h2 id="一对多："><a href="#一对多：" class="headerlink" title="一对多："></a>一对多：</h2><p>表：student studentclass  (关联：classid)<br>类：student studentClass  (关联：List<student> students )</student></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 利用resultMap实现一对多 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryClassAndStudents"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">resultMap</span>=<span class="string">"class_student_map"</span>&gt;</span></span><br><span class="line">		select s.*,c.* from student s inner join studentclass c</span><br><span class="line">		on</span><br><span class="line">		s.classid = c.classid where c.classid = #&#123;classId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 类与表一一对应 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"StudentClass"</span> <span class="attr">id</span>=<span class="string">"class_student_map"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"classId"</span> <span class="attr">column</span>=<span class="string">"classId"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"className"</span> <span class="attr">column</span>=<span class="string">"className"</span> /&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 一对多；属性类型javaType；（集合）属性的元素类型ofType --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"Student"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"stuNo"</span> <span class="attr">column</span>=<span class="string">"stuno"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuName"</span> <span class="attr">column</span>=<span class="string">"stuname"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuAge"</span> <span class="attr">column</span>=<span class="string">"stuAge"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"graName"</span> <span class="attr">column</span>=<span class="string">"graname"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuSex"</span> <span class="attr">column</span>=<span class="string">"stusex"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"card"</span> <span class="attr">javaType</span>=<span class="string">"StudentCard"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"cardId"</span> <span class="attr">column</span>=<span class="string">"cardid"</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"cardInfo"</span> <span class="attr">column</span>=<span class="string">"cardInfo"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一对多</p>
<p>（MyBatis:多对一，多对多的本质就是  一对多的变化）</p>
<h2 id="多对一"><a href="#多对一" class="headerlink" title="多对一"></a>多对一</h2><p>可以传入多个参数**column=”{prop1=col1,prop2=col2}”</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"userSolved"</span> <span class="attr">javaType</span>=<span class="string">"INTEGER"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">select</span>=<span class="string">"com.yoj.web.dao.SolutionMapper.querySolved"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">column</span>=<span class="string">"&#123;userId = user_id,problemId = problem_id&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"userSubmitted"</span> <span class="attr">javaType</span>=<span class="string">"INTEGER"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">select</span>=<span class="string">"com.yoj.web.dao.SolutionMapper.querySubmitted"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">column</span>=<span class="string">"&#123;userId = user_id,problemId = problem_id&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"SELECT solution_id FROM solution WHERE problem_id = #&#123;problemId&#125; and user_id = #&#123;userId&#125; and result = 0 LIMIT 1"</span>)</span><br><span class="line"><span class="function">Integer <span class="title">querySolved</span><span class="params">(Map&lt;String, Object&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="关联的嵌套-Select-查询"><a href="#关联的嵌套-Select-查询" class="headerlink" title="关联的嵌套 Select 查询"></a>关联的嵌套 Select 查询</h2><p>可以传入多个参数<strong>column=”{prop1=col1,prop2=col2}”</strong></p>
<p><strong>注意接收属性为Map</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"userSolved"</span> <span class="attr">javaType</span>=<span class="string">"INTEGER"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">select</span>=<span class="string">"com.yoj.web.dao.SolutionMapper.querySolved"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">column</span>=<span class="string">"&#123;userId = user_id,problemId = problem_id&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"userSubmitted"</span> <span class="attr">javaType</span>=<span class="string">"INTEGER"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">select</span>=<span class="string">"com.yoj.web.dao.SolutionMapper.querySubmitted"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">column</span>=<span class="string">"&#123;userId = user_id,problemId = problem_id&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"SELECT solution_id FROM solution WHERE problem_id = #&#123;problemId&#125; and user_id = #&#123;userId&#125; and result = 0 LIMIT 1"</span>)</span><br><span class="line"><span class="function">Integer <span class="title">querySolved</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Select</span>(<span class="string">"SELECT solution_id FROM solution WHERE problem_id = #&#123;problemId&#125; and user_id = #&#123;userId&#125; LIMIT 1"</span>)</span><br><span class="line"><span class="function">Integer <span class="title">querySubmitted</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>column</code></td>
<td align="left">数据库中的列名，或者是列的别名。一般情况下，这和传递给 <code>resultSet.getString(columnName)</code> 方法的参数一样。 注意：在使用复合主键的时候，你可以使用 <code>column=&quot;{prop1=col1,prop2=col2}&quot;</code> 这样的语法来指定多个传递给嵌套 Select 查询语句的列名。这会使得 <code>prop1</code> 和 <code>prop2</code> 作为参数对象，被设置为对应嵌套 Select 语句的参数。</td>
</tr>
<tr>
<td align="left"><code>select</code></td>
<td align="left">用于加载复杂类型属性的映射语句的 ID，它会从 column 属性指定的列中检索数据，作为参数传递给目标 select 语句。 具体请参考下面的例子。注意：在使用复合主键的时候，你可以使用 <code>column=&quot;{prop1=col1,prop2=col2}&quot;</code> 这样的语法来指定多个传递给嵌套 Select 查询语句的列名。这会使得 <code>prop1</code> 和 <code>prop2</code> 作为参数对象，被设置为对应嵌套 Select 语句的参数。</td>
</tr>
<tr>
<td align="left"><code>fetchType</code></td>
<td align="left">可选的。有效值为 <code>lazy</code> 和 <code>eager</code>。 指定属性后，将在映射中忽略全局配置参数 <code>lazyLoadingEnabled</code>，使用属性的值。</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"blogResult"</span> <span class="attr">type</span>=<span class="string">"Blog"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"author"</span> <span class="attr">column</span>=<span class="string">"author_id"</span> <span class="attr">javaType</span>=<span class="string">"Author"</span> <span class="attr">select</span>=<span class="string">"selectAuthor"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBlog"</span> <span class="attr">resultMap</span>=<span class="string">"blogResult"</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAuthor"</span> <span class="attr">resultType</span>=<span class="string">"Author"</span>&gt;</span></span><br><span class="line">  SELECT * FROM AUTHOR WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>就是这么简单。我们有两个 select 查询语句：一个用来加载博客（Blog），另外一个用来加载作者（Author），而且博客的结果映射描述了应该使用 <code>selectAuthor</code> 语句加载它的 author 属性。</p>
<p>其它所有的属性将会被自动加载，只要它们的列名和属性名相匹配。</p>
<p>这种方式虽然很简单，但在大型数据集或大型数据表上表现不佳。这个问题被称为“N+1 查询问题”。 概括地讲，N+1 查询问题是这样子的：</p>
<ul>
<li>你执行了一个单独的 SQL 语句来获取结果的一个列表（就是“+1”）。</li>
<li>对列表返回的每条记录，你执行一个 select 查询语句来为每条记录加载详细信息（就是“N”）。</li>
</ul>
<p>这个问题会导致成百上千的 SQL 语句被执行。有时候，我们不希望产生这样的后果。</p>
<p>好消息是，MyBatis 能够对这样的查询进行延迟加载，因此可以将大量语句同时运行的开销分散开来。 然而，如果你加载记录列表之后立刻就遍历列表以获取嵌套的数据，就会触发所有的延迟加载查询，性能可能会变得很糟糕。</p>
<h2 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h2><p>使用#{}，${}容易sql注入</p>
<p>使用concat函数拼接</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getProblemList"</span> <span class="attr">parameterType</span>=<span class="string">"com.yoj.web.bean.Problem"</span> <span class="attr">resultMap</span>=<span class="string">"ProblemList"</span>&gt;</span></span><br><span class="line">  select problem_id,title,#&#123;userId&#125; as user_id from problem</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"problemId != null"</span>&gt;</span></span><br><span class="line">          and problem_id LIKE CONCAT('%',#&#123;problemId&#125;,'%')</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"title != null"</span>&gt;</span></span><br><span class="line">          and title LIKE  CONCAT('%',#&#123;title&#125;,'%')</span><br><span class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="日志：Log4j"><a href="#日志：Log4j" class="headerlink" title="日志：Log4j"></a>日志：Log4j</h1><p>a.Log4j:    log4j.jar (mybatis.zip中lib中包含此jar)<br>b.开启日志，conf.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 开启日志，并指定使用的具体日志 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"LOG4J"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果不指定，Mybatis就会根据以下顺序 寻找日志<br>SLF4J →Apache Commons Logging →Log4j 2 → Log4j →JDK logging</p>
<p>c.编写配置日志输出文件</p>
<p>log4j.properties，内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">log4j.rootLogger=DEBUG, stdout</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure>

<h3 id="日志级别："><a href="#日志级别：" class="headerlink" title="日志级别："></a>日志级别：</h3><p>​    DEBUG&lt;INFO&lt;WARN&lt;ERROR<br>如果设置为info，则只显示 info及以上级别的信息；<br>建议：在开发时设置debug，在运行时设置为info或以上。</p>
<p>可以通过日志信息，相信的阅读mybatis执行情况（ 观察mybatis实际执行sql语句 以及SQL中的参数 和返回结果）</p>
<h1 id="延迟加载（懒加载）："><a href="#延迟加载（懒加载）：" class="headerlink" title="延迟加载（懒加载）："></a>延迟加载（懒加载）：</h1><p>一对一、一对多、多对一、多对多<br>一对多：班级-学生 ，<br>如果不采用延迟加载  （立即加载），查询时会将 一 和多 都查询，班级、班级中的所有学生。<br>如果想要  暂时只查询1的一方，  而多的一方 先不查询 而是在需要的时候再去查询 –&gt;延迟加载</p>
<p>一对一：学生、学生证</p>
<h3 id="mybatis中使用延迟加载，需要先配置："><a href="#mybatis中使用延迟加载，需要先配置：" class="headerlink" title="mybatis中使用延迟加载，需要先配置："></a>mybatis中使用延迟加载，需要先配置：</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 开启延迟加载 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 关闭立即加载 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>如果增加了mapper.xml ,要修改conf.xml配置文件（将新增的mapper.xml加载进去）</strong></p>
<p>通过debug可以发现， 如果程序只需要学生，则只向数据库发送了查询学生的SQL；<br>当我们后续 需要用到学生证的时候，再第二次发送 查询学生证的SQL。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"pers.nicolas.mapper.StudentCardMapper"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 后续通过namespace.Id 定位该SQL语句 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- parameterType：输入参数的类型 resultType：查询结果的返回类型 --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--  根据cardId查学生证信息--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"qeuryCardById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"studentCard"</span>&gt;</span></span><br><span class="line">		select * from studentcard where cardid = #&#123;cardId&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 延迟加载 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentWithLazyLoad"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">resultMap</span>=<span class="string">"student_card_lazyload_map"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 先查学生 --&gt;</span></span><br><span class="line">		select * from student </span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"student"</span> <span class="attr">id</span>=<span class="string">"student_card_lazyload_map"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"stuNo"</span> <span class="attr">column</span>=<span class="string">"stuno"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuName"</span> <span class="attr">column</span>=<span class="string">"stuname"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuAge"</span> <span class="attr">column</span>=<span class="string">"stuAge"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"graName"</span> <span class="attr">column</span>=<span class="string">"graname"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"stuSex"</span> <span class="attr">column</span>=<span class="string">"stusex"</span> /&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 延迟加载： 在加载学生时，并不立即加载学生证信息 通过调用sql column外键传参 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"card"</span> <span class="attr">javaType</span>=<span class="string">"StudentCard"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">select</span>=<span class="string">"pers.nicolas.mapper.StudentCardMapper.qeuryCardById"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">column</span>=<span class="string">"cardid"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一对多：和一对一的延迟加载配置方法相同</p>
<p>延迟加载的步骤：先查班级，按需查询学生<br>1.开启延迟加载conf.xml配置settings<br>2.配置mapper.xml<br>    写2个Mapper:<br>    班级mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryClassAndStudents"</span>   <span class="attr">resultMap</span>=<span class="string">"class_student_lazyLoad_map"</span>&gt;</span></span><br><span class="line">        select  c.* from studentclass c</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"studentClass"</span> <span class="attr">id</span>=<span class="string">"class_student_lazyLoad_map"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 因为 type的主类是班级，因此先配置班级的信息--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span>  <span class="attr">property</span>=<span class="string">"classId"</span> <span class="attr">column</span>=<span class="string">"classId"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span>  <span class="attr">property</span>=<span class="string">"className"</span> <span class="attr">column</span>=<span class="string">"className"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 配置成员属性学生，一对多;属性类型：javaType，属性的元素类型ofType --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 2222222再查班级对应的学生 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"student"</span> <span class="attr">select</span>=<span class="string">"org.lanqiao.mapper.StudentMapper.queryStudentsByClassId"</span> <span class="attr">column</span>=<span class="string">"classid"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<pre><code>&lt;/collection&gt;</code></pre><p>​<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">​</span><br></pre></td></tr></table></figure></p>
<p>即查询 学生的sql是通过 select属性指定，并且通过column指定外键</p>
<p>​<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">学生mapper.xml</span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- 一对多,延迟加载需要的： 查询班级中的所有学生 --&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudentsByClassId"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span></span><br><span class="line"><span class="xml">	select * from student where classId = #</span><span class="template-variable">&#123;classId&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<h1 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h1><h2 id="一级缓存-："><a href="#一级缓存-：" class="headerlink" title="一级缓存 ："></a>一级缓存 ：</h2><p>同一个SqlSession对象</p>
<p>​      MyBatis默认开启一级缓存，如果用同样的SqlSession对象查询相同的数据，<br>​    则只会在第一次 查询时 向数据库发送SQL语句，并将查询的结果 放入到</p>
<p>SQLSESSION中（作为缓存存在）；<br>    后续再次查询该同样的对象时，<br>    则直接从缓存中查询该对象即可（即省略了数据库的访问）    </p>
<p><img src="//codeofli.github.io/2019/10/java-note/mybatis/mybatis/E:%5Cpictures%5CLanguage%5Cmybatis%5C%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%981.png" alt="1561619500501"></p>
<h2 id="二级缓存"><a href="#二级缓存" class="headerlink" title="二级缓存"></a>二级缓存</h2><p>​    MyBatis默认情况没有开启二级缓存，需要手工打开。<br>​    a.conf.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开启二级缓存 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>​    b.在具体的mapper.xml中声明开启(studentMapper.xml中)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"org.lanqiao.mapper.StudentMapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 声明次namespace开启二级缓存 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<pre><code>根据异常提示：NotSerializableException可知，MyBatis的二级缓存 是将对象 放入硬盘文件中    
    序列化：内存-&gt;硬盘
    反序列化：硬盘-&gt;内存</code></pre><p>准备缓存的对象，必须实现了序列化接口 （如果开启的缓存Namespace=”org.lanqiao.mapper.StudentMapper”），可知序列化对象为Student，因此需要将Student序列化 （序列化Student类，以及Student的级联属性、和父类）</p>
<p><strong>触发将对象写入二级缓存的时机：SqlSession对象的close()方法。</strong></p>
<pre><code>Mybatis自带二级缓存：【同一个namespace】生成的mapper对象</code></pre><p>回顾：namespace的值 就是 接口的全类名（包名.类名）， 通过接口可以产生代理对象（studentMapper对象）</p>
<p>–&gt;namespace决定了studentMapper对象的产生<br>结论：只要产生的xxxMapper对象 来自于同一个namespace，则 这些对象 共享二级缓存。<br>注意：二级缓存 的范围是同一个namespace, 如果有多个xxMapper.xml的namespace值相同，则通过这些xxxMapper.xml产生的xxMapper对象 仍然共享二级缓存。</p>
<h3 id="禁用-："><a href="#禁用-：" class="headerlink" title="禁用 ："></a>禁用 ：</h3><p>select标签中useCache=”false”</p>
<h3 id="清理："><a href="#清理：" class="headerlink" title="清理："></a>清理：</h3><p>a.与清理一级缓存的方法相同</p>
<p><strong>commit();</strong> （一般执行增删改时 会清理掉缓存；设计的原因 是为了防止脏数据）<br>在二级缓存中，commit()不能是查询自身的commit。</p>
<p><strong>commit会清理一级和二级缓存；但是 清理二级缓存时，不能是查询自身的commit；</strong><br>  b. 在select标签中 增加属性 flushCache=”true”</p>
<p>命中率：<br>    1:zs :0%<br>    2:    50%<br>    3:   2/3    0.666<br>    4:  3/4     0.75</p>
<h3 id="三方提供的二级缓存："><a href="#三方提供的二级缓存：" class="headerlink" title="三方提供的二级缓存："></a>三方提供的二级缓存：</h3><p>ehcache、memcache</p>
<p>要想整合三方提供的二级缓存 （或者自定义二级缓存），必须实现org.apache.ibatis.cache.Cache接口，该接口的默认实现类是PerpetualCache</p>
<p>整合ehcache二级缓存：<br>a.<br>ehcache-core.jar<br>mybatis-Ehcache.jar<br>slf4j-api.jar</p>
<p>b.编写ehcache配置文件 Ehcache.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"../config/ehcache.xsd"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--当二级缓存的对象 超过内存限制时（缓存对象的个数&gt;maxElementsInMemory），存放入的硬盘文件  --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"E:\Ehcache"</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment"> 	maxElementsInMemory:设置 在内存中缓存 对象的个数</span></span><br><span class="line"><span class="comment">    maxElementsOnDisk：设置 在硬盘中缓存 对象的个数</span></span><br><span class="line"><span class="comment">    eternal：设置缓存是否 永远不过期</span></span><br><span class="line"><span class="comment">    overflowToDisk：当内存中缓存的对象个数 超过maxElementsInMemory的时候，是否转移到硬盘中</span></span><br><span class="line"><span class="comment">    timeToIdleSeconds：当2次访问 超过该值的时候，将缓存对象失效 </span></span><br><span class="line"><span class="comment">    timeToLiveSeconds：一个缓存对象 最多存放的时间（生命周期）</span></span><br><span class="line"><span class="comment">    diskExpiryThreadIntervalSeconds：设置每隔多长时间，通过一个线程来清理硬盘中的缓存</span></span><br><span class="line"><span class="comment">    memoryStoreEvictionPolicy：当超过缓存对象的最大值时，处理的策略；LRU，FIFO,LFU</span></span><br><span class="line"><span class="comment">  --&gt;</span>		     </span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">defaultCache</span></span></span><br><span class="line"><span class="tag">  <span class="attr">maxElementsInMemory</span>=<span class="string">"1000"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">maxElementsOnDisk</span>=<span class="string">"1000000"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">eternal</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeToIdleSeconds</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeToLiveSeconds</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">"120"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>c.开启EhCache二级缓存</p>
<p>在xxxMapper.xml中开启</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>  <span class="attr">type</span>=<span class="string">"org.mybatis.caches.ehcache.EhcacheCache"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 通过property覆盖Ehcache.xml中的值 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxElementsInMemory"</span> <span class="attr">value</span>=<span class="string">"2000"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxElementsOnDisk"</span> <span class="attr">value</span>=<span class="string">"3000"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="逆向工程"><a href="#逆向工程" class="headerlink" title="逆向工程"></a>逆向工程</h1><p>表、类、接口、mapper.xml四者密切相关，因此 当知道一个的时候  其他三个应该可以自动生成。<br><strong>表-&gt;其他三个</strong></p>
<p>实现步骤：</p>
<h2 id="a-导入依赖"><a href="#a-导入依赖" class="headerlink" title="a. 导入依赖"></a>a. 导入依赖</h2><p> mybatis-generator-core.jar、mybatis.jar、ojdbc.jar</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.  逆向工程的配置文件generator.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">  PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">  "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"DB2Tables"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- suppressAllComments属性值： true:自动生成实体类、SQL映射文件时没有注释 false:自动生成实体类、SQL映射文件，并附有注释 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 数据库连接信息 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"oracle.jdbc.OracleDriver"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">connectionURL</span>=<span class="string">"jdbc:oracle:thin:@127.0.0.1:1521:ORCL"</span> <span class="attr">userId</span>=<span class="string">"scott"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">password</span>=<span class="string">"tigger"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- forceBigDecimals属性值： true:把数据表中的DECIMAL和NUMERIC类型， 解析为JAVA代码中的java.math.BigDecimal类型 </span></span><br><span class="line"><span class="comment">			false(默认):把数据表中的DECIMAL和NUMERIC类型， 解析为解析为JAVA代码中的Integer类型 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- targetProject属性值:实体类的生成位置 targetPackage属性值：实体类所在包的路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">javaModelGenerator</span></span></span><br><span class="line"><span class="tag">			<span class="attr">targetPackage</span>=<span class="string">"org.lanqiao.entity"</span> <span class="attr">targetProject</span>=<span class="string">".\src"</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- trimStrings属性值： true：对数据库的查询结果进行trim操作 false(默认)：不进行trim操作 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- targetProject属性值:SQL映射文件的生成位置 targetPackage属性值：SQL映射文件所在包的路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"org.lanqiao.mapper"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">targetProject</span>=<span class="string">".\src"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 生成动态代理的接口 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">targetPackage</span>=<span class="string">"org.lanqiao.mapper"</span> <span class="attr">targetProject</span>=<span class="string">".\src"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 指定数据库表 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"Student"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"studentCard"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"studentClass"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>c.  执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"src/generator.xml"</span>); <span class="comment">// 配置文件</span></span><br><span class="line">		List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">		Configuration config = cp.parseConfiguration(file);</span><br><span class="line">		DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(<span class="keyword">true</span>);</span><br><span class="line">		<span class="comment">// 逆向工程核心类</span></span><br><span class="line">		MyBatisGenerator generator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">		generator.generate(<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisGeneratorTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		   List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		   <span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">		   File configFile = <span class="keyword">new</span> File(<span class="string">"mybatis-generator.xml"</span>);</span><br><span class="line">		   ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">		   Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">		   DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">		   MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">		   myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h1><h2 id="取到最后生成的主键"><a href="#取到最后生成的主键" class="headerlink" title="取到最后生成的主键"></a>取到最后生成的主键</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--取到最后生成的主键--&gt;</span><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertSelective"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyColumn</span>=<span class="string">"problem_id"</span> <span class="attr">keyProperty</span>=<span class="string">"problemId"</span>        <span class="attr">parameterType</span>=<span class="string">"com.yoj.web.bean.Problem"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="用Criteria实现多条件查询"><a href="#用Criteria实现多条件查询" class="headerlink" title="[用Criteria实现多条件查询]"></a>[用<em>Criteria</em>实现多条件查询]</h2><p>(<a href="https://blog.csdn.net/qjlhlh/article/details/6599557" target="_blank" rel="noopener">https://blog.csdn.net/qjlhlh/article/details/6599557</a>)</p>
<p>逆向工程产生的bean（entity class）的扩展类中的静态内部类。</p>
<h1 id="mybatis注解版"><a href="#mybatis注解版" class="headerlink" title="mybatis注解版"></a>mybatis注解版</h1><h2 id="插入时返回主键id"><a href="#插入时返回主键id" class="headerlink" title="插入时返回主键id"></a>插入时返回主键id</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="meta">@Insert</span>(<span class="string">"insert into tbl_user (name, age) values (#&#123;name&#125;, #&#123;age&#125;)"</span>)</span><br><span class="line">	<span class="meta">@Options</span>(useGeneratedKeys=<span class="keyword">true</span>, keyProperty=<span class="string">"userId"</span>, keyColumn=<span class="string">"id"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">insertUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="调用其他方法"><a href="#调用其他方法" class="headerlink" title="调用其他方法"></a>调用其他方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"SELECT * FROM solution ORDER BY solution_id DESC"</span>)</span><br><span class="line"><span class="meta">@Results</span>(&#123;</span><br><span class="line">    <span class="meta">@Result</span>(id = <span class="keyword">true</span>, column = <span class="string">"solution_id"</span>, property = <span class="string">"solutionId"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"problem_id"</span>, property = <span class="string">"problem"</span>, one = <span class="meta">@One</span>(select = <span class="string">"com.yoj.web.dao.ProblemMapper.queryProblemTitleAndIdById"</span>, fetchType = FetchType.EAGER)),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"language"</span>, property = <span class="string">"language"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"code"</span>, property = <span class="string">"code"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"result"</span>, property = <span class="string">"result"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"runtime"</span>, property = <span class="string">"runtime"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"memory"</span>, property = <span class="string">"memory"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"error_message"</span>, property = <span class="string">"errorMessage"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"submit_time"</span>, property = <span class="string">"submitTime"</span>),</span><br><span class="line">    <span class="meta">@Result</span>(column = <span class="string">"user_id"</span>, property = <span class="string">"user"</span>, one = <span class="meta">@One</span>(select = <span class="string">"com.yoj.web.dao.UserMapper.getUserById"</span>, fetchType = FetchType.EAGER))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function">List&lt;Solution&gt; <span class="title">getAllWithUserAndProblemName</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h1 id="other"><a href="#other" class="headerlink" title="other"></a>other</h1><h3 id="自动映射"><a href="#自动映射" class="headerlink" title="自动映射"></a>自动映射</h3><p>当自动映射查询结果时，MyBatis 会获取结果中返回的列名并在 Java 类中查找相同名字的属性（忽略大小写）。 这意味着如果发现了 <em>ID</em> 列和 <em>id</em> 属性，MyBatis 会将列 <em>ID</em> 的值赋给 <em>id</em> 属性。</p>
<p>通常数据库列使用大写字母组成的单词命名，单词间用下划线分隔；而 Java 属性一般遵循驼峰命名法约定。为了在这两种命名方式之间启用自动映射，需要将 <code>mapUnderscoreToCamelCase</code> 设置为 true。</p>
<h2 id="批量操作"><a href="#批量操作" class="headerlink" title="批量操作"></a>批量操作</h2><p><a href="https://blog.csdn.net/mahoking/article/details/46811865" target="_blank" rel="noopener">https://blog.csdn.net/mahoking/article/details/46811865</a></p>
<p>批量增加操作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 批量增加操作 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"batchInsertUsers"</span> <span class="attr">parameterType</span>=<span class="string">"java.util.List"</span>&gt;</span></span><br><span class="line">    insert into mhc_user(userName,password) values</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">index</span>=<span class="string">"index"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">        (#&#123;item.userName&#125;,#&#123;item.password&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="插入后取到最后生成的主键"><a href="#插入后取到最后生成的主键" class="headerlink" title="插入后取到最后生成的主键"></a>插入后取到最后生成的主键</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--取到最后生成的主键--&gt;</span><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertSelective"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyColumn</span>=<span class="string">"problem_id"</span> <span class="attr">keyProperty</span>=<span class="string">"problemId"</span>        <span class="attr">parameterType</span>=<span class="string">"com.yoj.web.bean.Problem"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="-1"><a href="#-1" class="headerlink" title></a></h2>
    </div>

    
    
    
    
    <div>
     
      <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

     
    </div>
    
        
      
        <div id="reward-container">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">

  </div>
</div>

      
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>nicolas lee</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://codeofli.github.io/2019/10/java-note/mybatis/mybatis/" title="mybatis">https://codeofli.github.io/2019/10/java-note/mybatis/mybatis/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>
</div>

      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/java/" rel="tag"># java</a>
            
              <a href="/tags/mybatis/" rel="tag"># mybatis</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/10/java-note/javaWeb/javaWeb/" rel="next" title="javaWeb">
                  <i class="fa fa-chevron-left"></i> javaWeb
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/10/java-note/maven/maven/" rel="prev" title="maven">
                  maven <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#入门"><span class="nav-number">1.</span> <span class="nav-text">入门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#mybatis约定："><span class="nav-number">1.1.</span> <span class="nav-text">mybatis约定：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注意事项："><span class="nav-number">1.2.</span> <span class="nav-text">注意事项：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#null"><span class="nav-number">1.3.</span> <span class="nav-text"></span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#conf-xml"><span class="nav-number">1.4.</span> <span class="nav-text">conf.xml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mapper-xml"><span class="nav-number">1.5.</span> <span class="nav-text">mapper.xml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mybatis约定：-1"><span class="nav-number">1.6.</span> <span class="nav-text">mybatis约定：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mapper动态代理方式的crud"><span class="nav-number">1.7.</span> <span class="nav-text">mapper动态代理方式的crud</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#具体实现的步骤："><span class="nav-number">1.8.</span> <span class="nav-text">具体实现的步骤：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#配置"><span class="nav-number">2.</span> <span class="nav-text">配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#别名"><span class="nav-number">2.1.</span> <span class="nav-text">别名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#类型处理器（类型转换器）"><span class="nav-number">3.</span> <span class="nav-text">类型处理器（类型转换器）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mybatis调用存储过程"><span class="nav-number">4.</span> <span class="nav-text">mybatis调用存储过程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#输入和输出参数"><span class="nav-number">5.</span> <span class="nav-text">输入和输出参数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#输入参数parameterType"><span class="nav-number">5.1.</span> <span class="nav-text">输入参数parameterType</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-类型为-简单类型（8个基本类型-String）"><span class="nav-number">5.2.</span> <span class="nav-text">1.类型为 简单类型（8个基本类型+String）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#、-的区别"><span class="nav-number">5.2.1.</span> <span class="nav-text">#{}、${}的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-对象类型"><span class="nav-number">5.3.</span> <span class="nav-text">2.对象类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输出参数resultType"><span class="nav-number">5.4.</span> <span class="nav-text">输出参数resultType</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#动态sql"><span class="nav-number">6.</span> <span class="nav-text">动态sql</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#where"><span class="nav-number">6.1.</span> <span class="nav-text">where</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if标签"><span class="nav-number">6.1.1.</span> <span class="nav-text">if标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#foreach-Tag"><span class="nav-number">6.1.2.</span> <span class="nav-text">foreach Tag</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sql片段"><span class="nav-number">6.1.3.</span> <span class="nav-text">sql片段</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#查询"><span class="nav-number">7.</span> <span class="nav-text">查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#关联查询："><span class="nav-number">7.1.</span> <span class="nav-text">关联查询：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一对一"><span class="nav-number">7.2.</span> <span class="nav-text">一对一:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一对多："><span class="nav-number">7.3.</span> <span class="nav-text">一对多：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多对一"><span class="nav-number">7.4.</span> <span class="nav-text">多对一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关联的嵌套-Select-查询"><span class="nav-number">7.5.</span> <span class="nav-text">关联的嵌套 Select 查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模糊查询"><span class="nav-number">7.6.</span> <span class="nav-text">模糊查询</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#日志：Log4j"><span class="nav-number">8.</span> <span class="nav-text">日志：Log4j</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#日志级别："><span class="nav-number">8.0.1.</span> <span class="nav-text">日志级别：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#延迟加载（懒加载）："><span class="nav-number">9.</span> <span class="nav-text">延迟加载（懒加载）：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mybatis中使用延迟加载，需要先配置："><span class="nav-number">9.0.1.</span> <span class="nav-text">mybatis中使用延迟加载，需要先配置：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#查询缓存"><span class="nav-number">10.</span> <span class="nav-text">查询缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一级缓存-："><span class="nav-number">10.1.</span> <span class="nav-text">一级缓存 ：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二级缓存"><span class="nav-number">10.2.</span> <span class="nav-text">二级缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#禁用-："><span class="nav-number">10.2.1.</span> <span class="nav-text">禁用 ：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#清理："><span class="nav-number">10.2.2.</span> <span class="nav-text">清理：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三方提供的二级缓存："><span class="nav-number">10.2.3.</span> <span class="nav-text">三方提供的二级缓存：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#逆向工程"><span class="nav-number">11.</span> <span class="nav-text">逆向工程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#a-导入依赖"><span class="nav-number">11.1.</span> <span class="nav-text">a. 导入依赖</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常用方法"><span class="nav-number">12.</span> <span class="nav-text">常用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#取到最后生成的主键"><span class="nav-number">12.1.</span> <span class="nav-text">取到最后生成的主键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用Criteria实现多条件查询"><span class="nav-number">12.2.</span> <span class="nav-text">[用Criteria实现多条件查询]</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mybatis注解版"><span class="nav-number">13.</span> <span class="nav-text">mybatis注解版</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#插入时返回主键id"><span class="nav-number">13.1.</span> <span class="nav-text">插入时返回主键id</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调用其他方法"><span class="nav-number">13.2.</span> <span class="nav-text">调用其他方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#other"><span class="nav-number">14.</span> <span class="nav-text">other</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自动映射"><span class="nav-number">14.0.1.</span> <span class="nav-text">自动映射</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#批量操作"><span class="nav-number">14.1.</span> <span class="nav-text">批量操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插入后取到最后生成的主键"><span class="nav-number">14.2.</span> <span class="nav-text">插入后取到最后生成的主键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#-1"><span class="nav-number">14.3.</span> <span class="nav-text"></span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/assets/img/avatar.jpg"
      alt="nicolas lee">
  <p class="site-author-name" itemprop="name">nicolas lee</p>
  <div class="site-description" itemprop="description">Yesterday you said tomorow.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">40</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/codeOflI" title="GitHub &rarr; https://github.com/codeOflI" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://blog.csdn.net/qq_42835910" title="CSDN &rarr; https://blog.csdn.net/qq_42835910" rel="noopener" target="_blank"><i class="fa fa-fw fa-crosshairs"></i>CSDN</a>
      </span>
    
  </div>
  <div class="cc-license motion-element" itemprop="license">
    
  
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2022</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">nicolas lee</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数"></span>
</div>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
  
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>

<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>